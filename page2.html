<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Interactive Screenshot with Speech Bubble Tooltip</title>

<!-- Preload WebP image -->
  <link rel="preload" href="peri2.webp" as="image" type="image/webp" />

  <!-- OpenDyslexic Font from fonts.cdnfonts.com -->
  <link href="https://fonts.cdnfonts.com/css/open-dyslexic" rel="stylesheet" />

  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Open-Dyslexic', sans-serif;
      background-color: transparent;
      color: white;
      height: 100%;
      width: 100%;

      /* Disable text selection */
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    .container {
      position: relative;
      width: 100%;
      max-width: 100%;
      aspect-ratio: 1920 / 1032;
    }

    .screenshot {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
    }

    /* Speech bubble tooltip with bottom-left tail (tooltip1) */
    .tooltip1 {
      position: absolute;
      font-family: 'Open-Dyslexic', sans-serif;
      color: #000;
      font-size: 2vw;
      text-align: center;
      padding: 1em;
      border-radius: 1.2em;
      box-sizing: border-box;

     --b: 1em;  /* tail base */
      --h: 0.7em; /* tail height */
      --c: #4ECDC4; /* background color (gold) */

      background: var(--c);
      border-top-left-radius: 0;
      clip-path: polygon(
        0 100%, 100% 100%, 100% 0,
        var(--b) 0,
        calc(-1 * var(--h)) calc(-1 * var(--h)),
        0 var(--b)
      );
      border-image: conic-gradient(var(--c) 0 0) 999 0 0 999 /
        calc(var(--h) + var(--b)) 0 0 calc(var(--h) + var(--b)) /
        var(--h) 0 0 var(--h);
      z-index: 15;
      display: none;
    }

    @keyframes pulseRainbow {
      0%   { border-color: red;    box-shadow: 0 0 10px red; }
      25%  { border-color: orange; box-shadow: 0 0 10px orange; }
      50%  { border-color: lime;   box-shadow: 0 0 10px lime; }
      75%  { border-color: cyan;   box-shadow: 0 0 10px cyan; }
      100% { border-color: red;    box-shadow: 0 0 10px red; }
    }

    .hotspot {
      position: absolute;
      border: 3px dashed red;
      border-radius: 10%;
      background-color: transparent;
      animation: pulseRainbow 3s linear infinite;
      cursor: pointer;
      box-sizing: border-box;
      z-index: 10;
      display: none;
    }

    /* Error tooltip - red fill, rounded, no tail, no border */
    .error-tooltip {
      font-size: 2vw;
      background: #d9534f;
      border-radius: 1.2em;
      clip-path: none;
      color: white;
      padding: 1em;
      position: absolute;
      box-sizing: border-box;
      text-align: center;
      font-family: 'Open-Dyslexic', sans-serif;
      z-index: 20;
      display: none;
      border: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <img src="peri2.webp" alt="Screenshot" class="screenshot" />

    <!-- Use the speech bubble tooltip class here -->
    <div class="tooltip1">
      1 – Click the drop-down arrow under the attachment
    </div>

    <div class="hotspot"></div>

    <div id="error-tooltip" class="error-tooltip">
      Please try again
    </div>
  </div>

  <script>
    function applyPositioning(data) {
      const tooltip = document.querySelector('.tooltip1');
      const errorTooltip = document.getElementById('error-tooltip');
      const hotspot = document.querySelector('.hotspot');

      if (tooltip && data.tooltip) {
        tooltip.style.position = 'absolute';
        tooltip.style.top = data.tooltip.top;
        tooltip.style.left = data.tooltip.left;
        tooltip.style.width = data.tooltip.width;
        tooltip.style.height = data.tooltip.height;
        tooltip.style.display = data.tooltip.display || 'block';
        tooltip.innerHTML = data.tooltip.html || tooltip.innerHTML; // <-- change here
	tooltip.style.fontSize = '2vw';
      }

      if (errorTooltip && data.errorTooltip) {
        errorTooltip.style.position = 'absolute';
        errorTooltip.style.top = data.errorTooltip.top;
        errorTooltip.style.left = data.errorTooltip.left;
        errorTooltip.style.width = data.errorTooltip.width;
        errorTooltip.style.height = data.errorTooltip.height;
        errorTooltip.style.display = data.errorTooltip.display || 'none';
        errorTooltip.innerHTML = data.errorTooltip.html || errorTooltip.innerHTML; // <-- change here
	errorTooltip.style.fontSize = '2vw';
      }

      if (hotspot && data.hotspot) {
        hotspot.style.position = 'absolute';
        hotspot.style.top = data.hotspot.top;
        hotspot.style.left = data.hotspot.left;
        hotspot.style.width = data.hotspot.width;
        hotspot.style.height = data.hotspot.height;
        hotspot.style.display = data.hotspot.display || 'block';
      }
    }

      // PASTE JSON HERE
    const positionData = {
  "tooltip": {
    "top": "52.4724%",
    "left": "23.4482%",
    "width": "32.2376%",
    "height": "16.345%",
    "html": "Click the <b>Filter</b> dropdown to view patients by theatre."
  },
  "errorTooltip": {
    "top": "87.065%",
    "left": "1.29975%",
    "width": "20.3735%",
    "height": "11.1673%",
    "html": "Please try again"
  },
  "hotspot": {
    "top": "41.129%",
    "left": "1.5345%",
    "width": "22.9606%",
    "height": "6.76777%"
  }
};

    const screenshot = document.querySelector('.screenshot');

  function setupInteractions() {
    applyPositioning(positionData);

    const hotspot = document.querySelector('.hotspot');
    const errorTooltip = document.getElementById('error-tooltip');

    // ✅ Click handler is now inside, after positioning
    document.body.addEventListener('click', (e) => {
      if (!hotspot.contains(e.target)) {
        errorTooltip.style.display = 'block';

        setTimeout(() => {
          errorTooltip.style.display = 'none';
        }, 3000);
      } else {
        window.location.href = 'page3.html';
      }
    });
  }

  // ✅ Wait until image is loaded before running setup
  if (screenshot.complete) {
    setTimeout(() => {
      setupInteractions();
    }, 1000);
  } else {
    screenshot.addEventListener('load', () => {
      setTimeout(() => {
        setupInteractions();
      }, 1000);
    });
  }
</script>
</body>
</html>

